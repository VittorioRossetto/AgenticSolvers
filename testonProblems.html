<html>
<body>
    <script src="https://js.puter.com/v2/"></script>
    <script>
        async function streamResponse() {
            const description = `The Black Hole Patience game is a solitaire card game. The MiniZinc model below encodes the rules and constraints for solving the game. The goal is to determine which constraint programming solver would be best suited for this problem, considering the following options:

            - Gecode
            - Chuffed
            - Google OR-Tools CP-SAT
            - HiGHS
            - COIN-OR CBC

            Please analyze the model and recommend the best solver for this problem, explaining your reasoning.`;

            // Black Hole MiniZinc model (truncated for brevity)
            const mznScript = `%------------------------------------------------------------------------%
% Solving the Black Hole Patience game
%------------------------------------------------------------------------%
%  The model of the problem is taken from \"Search in the Patience Game 'Black Hole'\". It only implements the basic model. The instances are generated by the black hole patience model in the Gecode distribution.
%  This model uses the following global constraints
%    - inverse
%    - table
include \"table.mzn\";
include \"inverse.mzn\";
array[1..416, 1..2] of int: neighbours;
array[1..17, 1..3] of int: layout;
array[1..52] of var 1..52: x;
array[1..52] of var 1..52: y;
constraint x[1] == 1;
constraint forall(i in 1..51) (table([x[i], x[i+1]], neighbours));
constraint inverse(x, y) :: domain;
constraint forall(i in 1..17, j in 1..2) (y[layout[i,j]] < y[layout[i,j+1]]);
solve :: int_search(x, input_order, indomain_min, complete) satisfy;
output [ \"x = \", show(x), ";\n" ];`;

            // Compose the prompt
            const prompt = `${description}\n\nMiniZinc model:\n${mznScript}`;

            puter.print("<h2>GPT-5 Recommendation for Black Hole Solver</h2>");
            const response = await puter.ai.chat(
                prompt,
                { stream: true, model: "gpt-5-nano" }
            );
            for await (const part of response) {
                // Print the raw part object for debugging
                puter.print('<pre>' + JSON.stringify(part, null, 2) + '</pre>');
                // Also print the .text property if present
                if (part?.text) {
                    puter.print(part.text);
                }
            }
        }

        streamResponse();
    </script>
</body>
</html>
